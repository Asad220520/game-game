<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Аркан Тартыш: Ultimate</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="setup-screen" class="setup-overlay">
      <div class="setup-card">
        <h1>АРКАН ТАРТЫШ</h1>
        <p class="subtitle">Математическая битва</p>

        <div class="settings-group">
          <label>Имена команд:</label>
          <div class="inputs-row">
            <input
              type="text"
              id="name-team-1"
              placeholder="Красные"
              value="Красные"
            />
            <input
              type="text"
              id="name-team-2"
              placeholder="Синие"
              value="Синие"
            />
          </div>
        </div>

        <div class="settings-group">
          <label>Сложность:</label>
          <select id="difficulty-select">
            <option value="20">Легко (до 20)</option>
            <option value="50">Средне (до 50)</option>
            <option value="100">Сложно (до 100)</option>
            <option value="hard">Эйнштейн (× и ÷)</option>
          </select>
        </div>

        <button onclick="startGame(false)" class="btn-start btn-local">
          НАЧАТЬ (ЛОКАЛЬНО)
        </button>

        <hr style="margin: 20px 0; border-top: 2px dashed #ccc" />

        <h2>Онлайн-Битва</h2>

        <div id="online-options">
          <button onclick="createOnlineRoom()" class="btn-online btn-create">
            СОЗДАТЬ КОМНАТУ
          </button>
          <div class="inputs-row" style="margin-top: 10px">
            <input
              type="text"
              id="room-code-input"
              placeholder="Код комнаты (1234)"
              style="width: 70%"
            />
            <button
              onclick="joinOnlineRoom()"
              class="btn-online btn-join"
              style="width: 30%"
            >
              ВОЙТИ
            </button>
          </div>
        </div>

        <div id="waiting-info" class="hidden">
          <p>Комната: <strong id="display-room-code">----</strong></p>
          <p id="waiting-message">Ожидание второго игрока...</p>
        </div>

        <p class="footer-note">* Онлайн режим использует Firebase</p>
      </div>
    </div>

  

    <div id="game-screen" class="hidden">
      <header class="top-bar">
        <div class="score-box team-1-score">
          <div class="team-name-label" id="label-1">TEAM 1</div>
          <span id="score-1">0</span>
        </div>

        <div class="rope-track">
          <div class="center-line"></div>
          <div class="rope-shadow"></div>

          <div id="rope-container">
            <div class="rope-knot"></div>
            <div class="rope-line left"></div>
            <div class="rope-line right"></div>
          </div>
        </div>

        <div class="score-box team-2-score">
          <div class="team-name-label" id="label-2">TEAM 2</div>
          <span id="score-2">0</span>
        </div>
      </header>

      <main class="game-area">
        <section class="team-panel team-1-panel">
          <div class="monitor-wrapper">
            <div class="question-display" id="q-1">Start...</div>
            <div class="input-display" id="input-1"></div>
          </div>
          <div class="keypad">
            <button onclick="pressKey(1, '1')">1</button>
            <button onclick="pressKey(1, '2')">2</button>
            <button onclick="pressKey(1, '3')">3</button>
            <button onclick="pressKey(1, '4')">4</button>
            <button onclick="pressKey(1, '5')">5</button>
            <button onclick="pressKey(1, '6')">6</button>
            <button onclick="pressKey(1, '7')">7</button>
            <button onclick="pressKey(1, '8')">8</button>
            <button onclick="pressKey(1, '9')">9</button>
            <button onclick="pressKey(1, 'C')" class="btn-clear">C</button>
            <button onclick="pressKey(1, '0')">0</button>
            <button onclick="pressKey(1, 'OK')" class="btn-go">GO</button>
          </div>
        </section>

        <section class="team-panel team-2-panel">
          <div class="monitor-wrapper">
            <div class="question-display" id="q-2">Start...</div>
            <div class="input-display" id="input-2"></div>
          </div>
          <div class="keypad">
            <button onclick="pressKey(2, '1')">1</button>
            <button onclick="pressKey(2, '2')">2</button>
            <button onclick="pressKey(2, '3')">3</button>
            <button onclick="pressKey(2, '4')">4</button>
            <button onclick="pressKey(2, '5')">5</button>
            <button onclick="pressKey(2, '6')">6</button>
            <button onclick="pressKey(2, '7')">7</button>
            <button onclick="pressKey(2, '8')">8</button>
            <button onclick="pressKey(2, '9')">9</button>
            <button onclick="pressKey(2, 'C')" class="btn-clear">C</button>
            <button onclick="pressKey(2, '0')">0</button>
            <button onclick="pressKey(2, 'OK')" class="btn-go">GO</button>
          </div>
        </section>
      </main>
    </div>

    <div id="winner-modal" class="modal hidden">
      <div class="modal-content">
        <h2 id="winner-text">ПОБЕДА!</h2>
        <button onclick="location.reload()">МЕНЮ</button>
      </div>
    </div>

    <audio
      id="sound-correct"
      src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YXoGAACAgICAgICAgICAgICAgICAgICAgICAgICAf3hxeHCAgIB/cnVygICAf3J1coCAgH9ydXKAgIB/cnVygICAf3J1coCAgH9ydXKAgIB/cnVygICAf3J1coCAgH9ydXKAgIB/cnVygICAgICAgICAgICA"
    ></audio>
      <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="script.js"></script>
  </body>
</html>
