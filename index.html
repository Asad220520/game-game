<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MegaQuiz Online</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary: #6c5ce7;
            --secondary: #a29bfe;
            --accent: #00cec9;
            --bg-color: #dfe6e9;
            --card-bg: #ffffff;
            --text: #2d3436;
        }

        body {
            font-family: 'Fredoka', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: var(--text);
            transition: background-color 1s ease;
            display: flex;
            justify-content: center;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 500px;
            padding: 20px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .card {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            text-align: center;
            animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        h1, h2 { margin: 0 0 15px 0; color: var(--primary); }
        
        input, select, button {
            width: 100%;
            padding: 12px;
            margin: 8px 0;
            border-radius: 12px;
            border: 2px solid #eee;
            font-size: 16px;
            font-family: inherit;
            box-sizing: border-box;
        }

        button {
            background: var(--primary);
            color: white;
            font-weight: bold;
            border: none;
            cursor: pointer;
            transition: transform 0.1s;
        }

        button:active { transform: scale(0.96); }
        
        .btn-outline { background: transparent; border: 2px solid var(--primary); color: var(--primary); }
        .btn-danger { background: #ff7675; }

        /* –ò–≥—Ä–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .option-btn {
            background: #f1f2f6;
            color: var(--text);
            padding: 20px;
            font-size: 1.1rem;
        }

        .option-btn.selected { background: var(--secondary); color: white; border: 2px solid var(--primary); }
        .option-btn.correct { background: #00b894 !important; color: white; animation: shake 0.5s; }
        .option-btn.wrong { background: #ff7675 !important; color: white; animation: shake 0.5s; }

        .player-list {
            list-style: none;
            padding: 0;
            text-align: left;
        }
        .player-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            border-bottom: 1px solid #eee;
            font-weight: bold;
        }
        .player-score { color: var(--primary); }

        .hidden { display: none !important; }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes popIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }

        /* –ê–¥–º–∏–Ω–∫–∞ */
        #admin-panel { border: 2px dashed #b2bec3; background: #fdfdfd; }
    </style>
</head>
<body>

    <div class="container">
        
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <h3 style="margin:0;">üöÄ MegaQuiz</h3>
            <button id="btn-login-toggle" style="width: auto; padding: 5px 10px; font-size: 12px;">Admin Login</button>
        </div>

        <div id="screen-auth" class="card hidden">
            <h2>–í—Ö–æ–¥ –¥–ª—è –ê–≤—Ç–æ—Ä–æ–≤</h2>
            <input type="email" id="auth-email" placeholder="Email">
            <input type="password" id="auth-pass" placeholder="–ü–∞—Ä–æ–ª—å">
            <button onclick="login()">–í–æ–π—Ç–∏</button>
            <button onclick="register()" class="btn-outline">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
            <p id="auth-msg" style="color:red; font-size:12px;"></p>
        </div>

        <div id="screen-admin" class="card hidden">
            <h2>–î–æ–±–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å</h2>
            <select id="new-cat">
                <option value="math">–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞</option>
                <option value="history">–ò—Å—Ç–æ—Ä–∏—è</option>
                <option value="science">–ù–∞—É–∫–∞</option>
                <option value="cinema">–ö–∏–Ω–æ</option>
            </select>
            <input type="text" id="new-q" placeholder="–¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞">
            <input type="text" id="new-a1" placeholder="–û—Ç–≤–µ—Ç 1 (–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π)">
            <input type="text" id="new-a2" placeholder="–û—Ç–≤–µ—Ç 2">
            <input type="text" id="new-a3" placeholder="–û—Ç–≤–µ—Ç 3">
            <input type="text" id="new-a4" placeholder="–û—Ç–≤–µ—Ç 4">
            <button onclick="addQuestion()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤–æ–ø—Ä–æ—Å</button>
            <button onclick="logout()" class="btn-danger">–í—ã–π—Ç–∏</button>
        </div>

        <div id="screen-lobby" class="card">
            <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h1>
            <input type="text" id="player-name" placeholder="–í–∞—à–µ –∏–º—è">
            <div style="height: 1px; background: #eee; margin: 15px 0;"></div>
            
            <h3>–°–æ–∑–¥–∞—Ç—å –∏–≥—Ä—É</h3>
            <select id="game-cat">
                <option value="math">–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞</option>
                <option value="history">–ò—Å—Ç–æ—Ä–∏—è</option>
                <option value="science">–ù–∞—É–∫–∞</option>
                <option value="cinema">–ö–∏–Ω–æ</option>
            </select>
            <button onclick="createRoom()">–°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É</button>
            
            <h3 style="margin-top:20px;">–ò–ª–∏ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è</h3>
            <input type="text" id="room-code-input" placeholder="–ö–æ–¥ –∫–æ–º–Ω–∞—Ç—ã (–Ω–∞–ø—Ä. 1234)">
            <button onclick="joinRoom()" class="btn-outline">–í–æ–π—Ç–∏</button>
        </div>

        <div id="screen-waiting" class="card hidden">
            <h2 id="room-code-display">–ö–æ–º–Ω–∞—Ç–∞: ----</h2>
            <p>–û–∂–∏–¥–∞–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–≤...</p>
            <ul id="waiting-list" class="player-list"></ul>
            <button id="btn-start-game" onclick="startGame()" class="hidden">–ù–ê–ß–ê–¢–¨ –ò–ì–†–£</button>
            <p id="wait-msg">–ñ–¥–µ–º, –ø–æ–∫–∞ —Ö–æ—Å—Ç –Ω–∞—á–Ω–µ—Ç –∏–≥—Ä—É...</p>
        </div>

        <div id="screen-game" class="card hidden">
            <div style="display: flex; justify-content: space-between; font-size: 0.9rem; color: #636e72;">
                <span id="game-cat-display">Category</span>
                <span id="game-timer">‚è≥</span>
            </div>
            <h2 id="question-text" style="font-size: 1.4rem; margin-top: 10px;">–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
            
            <div class="options-grid" id="options-container">
                </div>
            
            <p id="feedback-msg" style="height: 20px; font-weight: bold;"></p>
        </div>

        <div id="screen-result" class="card hidden">
            <h1>üèÜ –§–∏–Ω–∞–ª!</h1>
            <ul id="final-list" class="player-list"></ul>
            <button onclick="location.reload()">–í –ú–ï–ù–Æ</button>
        </div>

    </div>

    <script>
        // ==========================================
        // ‚öôÔ∏è –ù–ê–°–¢–†–û–ô–ö–ò FIREBASE (–ó–ê–ú–ï–ù–ò–¢–ï –ù–ê –°–í–û–ò!)
        // ==========================================
        const firebaseConfig = {
            apiKey: "AIzaSyD-YOUR-API-KEY-HERE",
            authDomain: "your-app.firebaseapp.com",
            databaseURL: "https://your-app-default-rtdb.firebaseio.com",
            projectId: "your-app",
            storageBucket: "your-app.appspot.com",
            messagingSenderId: "123456789",
            appId: "1:123456789:web:abcde"
        };
        
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        const auth = firebase.auth();

        // ==========================================
        // üß© –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï
        // ==========================================
        let currentPlayer = { name: "", id: "", score: 0 };
        let currentRoomId = null;
        let isHost = false;
        let questions = []; // –õ–æ–∫–∞–ª—å–Ω—ã–π –∫—ç—à –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è —Ç–µ–∫—É—â–µ–π –∏–≥—Ä—ã
        let currentQIndex = 0;

        // ==========================================
        // üöÄ –ë–ê–ó–û–í–´–ï –í–û–ü–†–û–°–´ (–ï–°–õ–ò –ë–ê–ó–ê –ü–£–°–¢–ê)
        // ==========================================
        const defaultQuestions = {
            math: [
                {q: "2 + 2 * 2 = ?", a: ["6", "8", "4", "10"], correct: "6"},
                {q: "–ö–æ—Ä–µ–Ω—å –∏–∑ 144?", a: ["12", "14", "10", "16"], correct: "12"},
                {q: "100 / 5", a: ["20", "25", "10", "50"], correct: "20"}
            ],
            history: [
                {q: "–ü–µ—Ä–≤—ã–π –ø—Ä–µ–∑–∏–¥–µ–Ω—Ç –°–®–ê?", a: ["–í–∞—à–∏–Ω–≥—Ç–æ–Ω", "–õ–∏–Ω–∫–æ–ª—å–Ω", "–ö–µ–Ω–Ω–µ–¥–∏", "–¢—Ä–∞–º–ø"], correct: "–í–∞—à–∏–Ω–≥—Ç–æ–Ω"},
                {q: "–ì–æ–¥ –æ—Å–Ω–æ–≤–∞–Ω–∏—è –†–∏–º–∞?", a: ["753 –¥–æ –Ω.—ç.", "1 –≥. –Ω.—ç.", "400 –¥–æ –Ω.—ç.", "1000"], correct: "753 –¥–æ –Ω.—ç."}
            ]
        };

        // ==========================================
        // üéÆ –õ–û–ì–ò–ö–ê –ò–ì–†–´
        // ==========================================

        function showScreen(id) {
            document.querySelectorAll('.card').forEach(el => el.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
        }

        // --- –õ–æ–±–±–∏ ---
        function createRoom() {
            const name = document.getElementById('player-name').value;
            if(!name) return alert("–í–≤–µ–¥–∏—Ç–µ –∏–º—è!");
            
            const cat = document.getElementById('game-cat').value;
            const roomId = Math.floor(1000 + Math.random() * 9000).toString(); // –ü—Ä–æ—Å—Ç–æ–π ID –∏–∑ 4 —Ü–∏—Ñ—Ä
            
            currentPlayer.name = name;
            currentPlayer.id = Date.now().toString(); // –í—Ä–µ–º–µ–Ω–Ω—ã–π ID
            isHost = true;
            currentRoomId = roomId;

            // –°–æ–∑–¥–∞–µ–º –∫–æ–º–Ω–∞—Ç—É –≤ –ë–î
            db.ref('rooms/' + roomId).set({
                status: 'waiting',
                category: cat,
                questionIndex: 0,
                players: {
                    [currentPlayer.id]: { name: name, score: 0 }
                }
            });

            enterWaitingRoom();
        }

        function joinRoom() {
            const name = document.getElementById('player-name').value;
            const code = document.getElementById('room-code-input').value;
            if(!name || !code) return alert("–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∏ –∫–æ–¥!");

            currentPlayer.name = name;
            currentPlayer.id = Date.now().toString();
            currentRoomId = code;
            isHost = false;

            const roomRef = db.ref('rooms/' + code);
            roomRef.get().then((snapshot) => {
                if (snapshot.exists() && snapshot.val().status === 'waiting') {
                    roomRef.child('players/' + currentPlayer.id).set({
                        name: name,
                        score: 0
                    });
                    enterWaitingRoom();
                } else {
                    alert("–ö–æ–º–Ω–∞—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –∏–ª–∏ –∏–≥—Ä–∞ —É–∂–µ –∏–¥–µ—Ç!");
                }
            });
        }

        function enterWaitingRoom() {
            showScreen('screen-waiting');
            document.getElementById('room-code-display').innerText = `–ö–æ–º–Ω–∞—Ç–∞: ${currentRoomId}`;
            
            if(isHost) {
                document.getElementById('btn-start-game').classList.remove('hidden');
                document.getElementById('wait-msg').classList.add('hidden');
            }

            // –°–ª—É—à–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–º–Ω–∞—Ç–µ
            const roomRef = db.ref('rooms/' + currentRoomId);
            
            roomRef.on('value', (snapshot) => {
                const data = snapshot.val();
                if(!data) return;

                // 1. –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤
                const list = document.getElementById('waiting-list');
                list.innerHTML = "";
                if(data.players) {
                    Object.values(data.players).forEach(p => {
                        list.innerHTML += `<li class="player-item">${p.name} <span class="player-score">${p.score}</span></li>`;
                    });
                }

                // 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∏–≥—Ä—ã
                if(data.status === 'playing') {
                    // –ï—Å–ª–∏ –º—ã –µ—â–µ –≤ –æ–∂–∏–¥–∞–Ω–∏–∏, –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –∏–≥—Ä—É
                    if(!document.getElementById('screen-game').classList.contains('hidden')) {
                         // already there
                    } else {
                         loadGameData(data.category);
                    }
                    
                    // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–∞
                    if(data.questionIndex !== currentQIndex) {
                        currentQIndex = data.questionIndex;
                        renderQuestion();
                    }
                } else if (data.status === 'finished') {
                    showResults(data.players);
                }
            });
        }

        // --- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –∏–≥—Ä–µ ---
        function startGame() {
            // –•–æ—Å—Ç –Ω–∞–∂–∏–º–∞–µ—Ç —Å—Ç–∞—Ä—Ç
            db.ref('rooms/' + currentRoomId).update({ status: 'playing' });
        }

        function loadGameData(category) {
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –≤–æ–ø—Ä–æ—Å—ã –∏–∑ –ë–î –∏–ª–∏ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ
            db.ref('questions/' + category).once('value').then(snap => {
                const fetched = snap.val();
                if(fetched) {
                    // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –æ–±—ä–µ–∫—Ç Firebase –≤ –º–∞—Å—Å–∏–≤
                    questions = Object.values(fetched);
                } else {
                    // –ï—Å–ª–∏ –Ω–µ—Ç –≤ –±–∞–∑–µ, –±–µ—Ä–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∏–ª–∏ –∑–∞–≥–ª—É—à–∫—É
                    questions = defaultQuestions[category] || defaultQuestions['math'];
                }
                // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –≤–æ–ø—Ä–æ—Å—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
                // questions.sort(() => Math.random() - 0.5); 
                
                showScreen('screen-game');
                document.getElementById('game-cat-display').innerText = category.toUpperCase();
                renderQuestion();
            });
        }

        // --- –ü—Ä–æ—Ü–µ—Å—Å –∏–≥—Ä—ã ---
        function renderQuestion() {
            if(currentQIndex >= questions.length) {
                // –í–æ–ø—Ä–æ—Å—ã –∫–æ–Ω—á–∏–ª–∏—Å—å
                if(isHost) db.ref('rooms/' + currentRoomId).update({ status: 'finished' });
                return;
            }

            const qData = questions[currentQIndex];
            document.getElementById('question-text').innerText = qData.q;
            document.getElementById('feedback-msg').innerText = "";
            
            const cont = document.getElementById('options-container');
            cont.innerHTML = "";

            // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –æ—Ç–≤–µ—Ç—ã
            let answers = [...qData.a];
            if(qData.a.length === 4) answers.sort(() => Math.random() - 0.5);

            answers.forEach(ans => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.innerText = ans;
                btn.onclick = () => submitAnswer(btn, ans, qData.correct);
                cont.appendChild(btn);
            });
        }

        function submitAnswer(btn, value, correct) {
            // –ë–ª–æ–∫–∏—Ä—É–µ–º –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ
            const allBtns = document.querySelectorAll('.option-btn');
            allBtns.forEach(b => b.disabled = true);

            if(value === correct) {
                btn.classList.add('correct');
                if(navigator.vibrate) navigator.vibrate(50); // –í–∏–±—Ä–∞—Ü–∏—è
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç –≤ –ë–î
                const scoreRef = db.ref(`rooms/${currentRoomId}/players/${currentPlayer.id}/score`);
                scoreRef.transaction(currentScore => (currentScore || 0) + 10);
                
                document.getElementById('feedback-msg').innerText = "–í–µ—Ä–Ω–æ! +10";
                document.getElementById('feedback-msg').style.color = "green";
            } else {
                btn.classList.add('wrong');
                if(navigator.vibrate) navigator.vibrate([100, 50, 100]); // –î–≤–æ–π–Ω–∞—è –≤–∏–±—Ä–∞—Ü–∏—è
                document.getElementById('feedback-msg').innerText = "–û—à–∏–±–∫–∞!";
                document.getElementById('feedback-msg').style.color = "red";
            }

            // –ï—Å–ª–∏ —Ö–æ—Å—Ç - —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º –≤–æ–ø—Ä–æ—Å –≤—Å–µ–º
            if(isHost) {
                setTimeout(() => {
                    db.ref(`rooms/${currentRoomId}`).update({
                        questionIndex: currentQIndex + 1
                    });
                }, 3000);
            }
        }

        // --- –§–∏–Ω–∞–ª ---
        function showResults(players) {
            showScreen('screen-result');
            // –ú–µ–Ω—è–µ–º —Ñ–æ–Ω –Ω–∞ –∑–æ–ª–æ—Ç–∏—Å—Ç—ã–π
            document.body.style.backgroundColor = "#ffeaa7";
            
            // –ö–æ–Ω—Ñ–µ—Ç—Ç–∏
            confetti({
                particleCount: 150,
                spread: 70,
                origin: { y: 0.6 }
            });

            const list = document.getElementById('final-list');
            list.innerHTML = "";
            
            // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
            const sorted = Object.values(players).sort((a,b) => b.score - a.score);
            
            sorted.forEach((p, index) => {
                let medal = "";
                if(index === 0) medal = "ü•á ";
                if(index === 1) medal = "ü•à ";
                if(index === 2) medal = "ü•â ";
                
                list.innerHTML += `<li class="player-item" style="${index===0 ? 'background:#ffd70033; font-size:1.2em;' : ''}">
                    <span>${medal}${p.name}</span>
                    <span>${p.score}</span>
                </li>`;
            });
        }

        // ==========================================
        // üîê –ê–î–ú–ò–ù–ö–ê (AUTH)
        // ==========================================
        
        document.getElementById('btn-login-toggle').onclick = () => {
            const adminScreen = document.getElementById('screen-admin');
            const authScreen = document.getElementById('screen-auth');
            
            if(!adminScreen.classList.contains('hidden')) {
                showScreen('screen-lobby'); // –ó–∞–∫—Ä—ã—Ç—å –∞–¥–º–∏–Ω–∫—É
            } else {
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
                if(auth.currentUser) showScreen('screen-admin');
                else showScreen('screen-auth');
            }
        };

        function login() {
            const e = document.getElementById('auth-email').value;
            const p = document.getElementById('auth-pass').value;
            auth.signInWithEmailAndPassword(e, p)
                .then(() => showScreen('screen-admin'))
                .catch(err => document.getElementById('auth-msg').innerText = err.message);
        }

        function register() {
            const e = document.getElementById('auth-email').value;
            const p = document.getElementById('auth-pass').value;
            auth.createUserWithEmailAndPassword(e, p)
                .then(() => showScreen('screen-admin'))
                .catch(err => document.getElementById('auth-msg').innerText = err.message);
        }

        function logout() {
            auth.signOut().then(() => {
                showScreen('screen-lobby');
            });
        }

        function addQuestion() {
            const cat = document.getElementById('new-cat').value;
            const q = document.getElementById('new-q').value;
            // –ü–µ—Ä–≤—ã–π –æ—Ç–≤–µ—Ç —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –≤ —Ñ–æ—Ä–º–µ –≤–≤–æ–¥–∞ –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã, 
            // –Ω–æ –≤ –æ–±—ä–µ–∫—Ç –º—ã —Å–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä
            const correct = document.getElementById('new-a1').value;
            const a2 = document.getElementById('new-a2').value;
            const a3 = document.getElementById('new-a3').value;
            const a4 = document.getElementById('new-a4').value;

            if(!q || !correct) return alert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è");

            const newQ = {
                q: q,
                correct: correct,
                a: [correct, a2, a3, a4]
            };

            db.ref('questions/' + cat).push(newQ)
                .then(() => {
                    alert("–í–æ–ø—Ä–æ—Å –¥–æ–±–∞–≤–ª–µ–Ω!");
                    document.getElementById('new-q').value = "";
                });
        }

    </script>
</body>
</html>